<form [formGroup]="songUploadData.formGroup" (ngSubmit)="onSubmit()" vgFocusFirstInvalid [form]="songUploadData.formGroup">
  <div class="form-group">
    <label for="songTitle">{{ 'Title' | translate }}</label>
    <input type="text" class="form-control" id="songTitle" placeholder="Enter song title" formControlName="title" />
    <vg-error-section [label]="'Title' | translate" [group]="songUploadData.formGroup" controlName="title"></vg-error-section>
  </div>
  <label>{{ 'Artist' | translate }}</label>
  <app-artist-add-suggestion [uploadData]="songUploadData"></app-artist-add-suggestion>

  <div class="form-group">
    <label for="releaseDate">{{ 'Release Date' | translate }}</label>
    <div class="input-group">
      <input
        class="form-control"
        placeholder="dd/MM/yyyy"
        id="releaseDate"
        name="dp"
        ngbDatepicker
        #d="ngbDatepicker"
        formControlName="releaseDate"
        [minDate]="minDate"
      />
      <div class="input-group-append">
        <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
          <i class="bi bi-calendar3"></i>
        </button>
      </div>
    </div>
    <vg-error-section [label]="'Release Date' | translate" [group]="songUploadData.formGroup" controlName="releaseDate"></vg-error-section>
  </div>
  <div class="form-group">
    <label for="country">{{ 'Country' | translate }}</label>
    <select id="country" class="form-select" formControlName="country" [compareWith]="compareCountries">
      <option [selected] [ngValue]="null">{{ 'Choose a country' | translate }}</option>
      <option *ngFor="let country of (countryList$ | async)" [ngValue]="country">{{ country.name }}</option>
    </select>
  </div>
  <div class="form-group">
    <label for="tags">{{ 'Tags' | translate }}</label>
    <input
      type="text"
      class="form-control"
      id="tags"
      [placeholder]="'Multiple tags separated by commas' | translate"
      formControlName="tags"
    />
  </div>
  <label for="audio">{{ 'Audio File' | translate }}</label>
  <div class="form-group">
    <vg-file-input
      id="audio"
      formControlName="url"
      [remoteFileType]="'audio'"
      [formData]="songUploadData.formData"
      [formDataFilePart]="'audio'"
      (metadataLoadedEvent)="setMetadata($event, songUploadData.formGroup)"
    ></vg-file-input>
  </div>
  <button *ngIf="isSubmittable" type="submit" class="btn btn-primary rounded-pill my-2 float-right">{{ 'Submit' | translate }}</button>
  <vg-upload-progress
    [hidden]="!songUploadData.observable"
    [httpObs]="songUploadData.observable"
    (successEvent)="onUploadSuccess($event)"
  ></vg-upload-progress>
</form>
